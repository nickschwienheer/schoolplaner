<!DOCTYPE html>
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<html lang="en">
<head>
        <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="apple-touch-startup-image" href="icon.png">
        <link rel="apple-touch-icon" href="icon.png">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="viewport" content="initial-scale=1,viewport-fit=cover, user-scalable=no">
<link rel="apple-touch-startup-image" href="splash.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="splash.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="splash.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="splash.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="splash.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="splash.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
<link rel="apple-touch-startup-image" href="splash.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">


    
</head>
<header>
<br><br>
<a onclick="menuDropOut()" class="menuButton"><img src="menu.png" height="50px"></a>
<h1>Schulplaner</h1>
</header>

 <body>


         <br><br><br><br><br>
         <br><br><br><br><br>
         <div style="width: 100%;"></div>
         <table class="tg" style="table-layout: fixed; width: 98%; height: 50vh;">
                        <colgroup>
                        <col style="width: 34px">
                        <col style="width: 63px">
                        <col style="width: 63px">
                        <col style="width: 63px">
                        <col style="width: 63px">
                        <col style="width: 63px">
                        </colgroup>
                          <tr>
                            <th class="tg-6shb"><br></th>
                            <th class="tg-6shb">Mo.</th>
                            <th class="tg-6shb">Di.</th>
                            <th class="tg-6shb">Mi.</th>
                            <th class="tg-6shb">Do.</th>
                            <th class="tg-6shb">Fr.</th>
                          </tr>
                          <tr>
                            <td class="tg-szxb">1.</td>
                            <td id="Mon-1" class="tg-ced2"></td>
                            <td id="Tue-1" class="tg-s6z2"></td>
                            <td id="Wed-1" class="tg-s6z2"></td>
                            <td id="Thu-1" class="tg-s6z2"></td>
                            <td id="Fri-1" class="tg-s6z2"></td>
                          </tr>
                          <tr>
                            <td class="tg-szxb">2.</td>
                            <td id="Mon-2" class="tg-s6z2"></td>
                            <td id="Tue-2" class="tg-s6z2"></td>
                            <td id="Wed-2" class="tg-s6z2"></td>
                            <td id="Thu-2" class="tg-s6z2"></td>
                            <td id="Fri-2" class="tg-s6z2"></td>
                          </tr>
                          <tr>
                            <td class="tg-szxb">3.</td>
                            <td id="Mon-3" class="tg-s6z2"></td>
                            <td id="Tue-3" class="tg-s6z2"></td>
                            <td id="Wed-3" class="tg-s6z2"></td>
                            <td id="Thu-3" class="tg-s6z2"></td>
                            <td id="Fri-3" class="tg-s6z2"></td>
                          </tr>
                          <tr>
                            <td class="tg-szxb">4.</td>
                            <td id="Mon-4" class="tg-s6z2"></td>
                            <td id="Tue-4" class="tg-s6z2"></td>
                            <td id="Wed-4" class="tg-s6z2"></td>
                            <td id="Thu-4" class="tg-s6z2"></td>
                            <td id="Fri-4" class="tg-s6z2"></td>
                          </tr>
                          <tr>
                            <td class="tg-szxb">5.</td>
                            <td id="Mon-5" class="tg-s6z2"></td>
                            <td id="Tue-5" class="tg-s6z2"></td>
                            <td id="Wed-5" class="tg-s6z2"></td>
                            <td id="Thu-5" class="tg-s6z2"></td>
                            <td id="Fri-5" class="tg-s6z2"></td>
                          </tr>
                          <tr>
                            <td class="tg-szxb">6.</td>
                            <td id="Mon-6" class="tg-s6z2"></td>
                            <td id="Tue-6" class="tg-s6z2"></td>
                            <td id="Wed-6" class="tg-s6z2"></td>
                            <td id="Thu-6" class="tg-s6z2"></td>
                            <td id="Fri-6" class="tg-s6z2"></td>
                          </tr>
                          <tr>
                            <td class="tg-szxb">7</td>
                            <td id="Mon-7" class="tg-s6z2"></td>
                            <td id="Tue-7" class="tg-s6z2"></td>
                            <td id="Wed-7" class="tg-s6z2"></td>
                            <td id="Thu-7" class="tg-s6z2"></td>
                            <td id="Fri-7" class="tg-s6z2"></td>
                          </tr>
                        </table>
                </div>
         <br>
         <br><br><br>



<!--------------------------------homework-widget------------------------------------->
<div class="überschrift">

        <h2>Deine Hausaufgaben</h2>
</div>
                <textarea id="homeworkField" onclick="openHomeworkMode()" class="homework-widget" readonly></textarea>
     
        

<br><br>



<!--------------------------------add-homework-field--------------------------------->

<div id="addHomeworkField" class="addHomeworkField">
        <br><br>
        <h1>Hausaufgaben</h1>
        <br>
        <a class="backButton" onclick="backFromHomework()">zurück</a>
        <div class="überschrift">
        </div>
      
 
        <br>
        <br>
        <textarea id="homework" class="addhomeworkTextField" placeholder="Hausaufgaben hier:"></textarea>
        <br><br>
        <button onclick="saveHomework()">speichern</button>
        <br><br><br>
        <div class="überschrift">
             
     
        
        <br><br>

</div>
</div>

<!--------------------------------Events-widget----------------------------------------->
        <div class="überschrift">
        <h2>Aktuelle Termine</h2>
        </div>

        <br>
               
        <div class="Events-widget"></div>
      <br>



<!----------------------------------menu------------------------------------>
      <div id="menu" class="menu">
                <button onclick="timetable()">Stundenplan</button>
                <br>
                <br>
                <button onclick="openUpdateMode()">Softwareupdate</button>
      </div>
      



      <div id="configuration1" class="configuration1">
              <br><br><br>
              <h1>Login</h1>
              <br><br><br><br>
              <div id="login">
              <input id="key" type="password" placeholder=" Produktschlüssel:">
              <br>
              <p id="fail"> </p>
              <br>
              <button onclick="login()">einloggen</button>
        </div>
              <br>
              <br>
              <br>
              <br>
              <br>
              <p>oder</p>
              <button onclick="buyAccess()">Produktschlüssel kaufen</button> 
              <br>

        <div class="pageControll">
              <img src="circle-filled.png" width="20px">
              <img  src="circle.png" width="20px">
              <img src="circle.png" width="20px">
        </div>


              <br>
      </div>



      <div id="configuration2" class="configuration1">
        <br><br><br>
    
        <h1>Stundenplan</h1>
        <p>Erstelle deinen Stundenplan</p>
        <br>
      <div style="width: 100%;">
        <table class="tg" style="table-layout: fixed; width: 98%; height: 50vh;">
                <colgroup>
                <col style="width: 34px">
                <col style="width: 63px">
                <col style="width: 63px">
                <col style="width: 63px">
                <col style="width: 63px">
                <col style="width: 63px">
                </colgroup>
                <tr>
                        <th class="tg-6shb"><br></th>
                        <th class="tg-6shb">Mo.</th>
                        <th class="tg-6shb">Di.</th>
                        <th class="tg-6shb">Mi.</th>
                        <th class="tg-6shb">Do.</th>
                        <th class="tg-6shb">Fr.</th>
                      </tr>
                  <tr>
                        <td class="tg-szxb">1.</td>
                        <td id="Mon1" class="tg-ced2" onclick="addSubject('Mon1')"></td>
                        <td id="Tue1" class="tg-s6z2" onclick="addSubject('Tue1')"></td>
                        <td id="Wed1" class="tg-s6z2" onclick="addSubject('Wed1')"></td>
                        <td id="Thu1" class="tg-s6z2" onclick="addSubject('Thu1')"></td>
                        <td id="Fri1" class="tg-s6z2" onclick="addSubject('Fri1')"></td>
                      </tr>
                      <tr>
                        <td class="tg-szxb">2.</td>
                        <td id="Mon2" class="tg-s6z2" onclick="addSubject('Mon2')"></td>
                        <td id="Tue2" class="tg-s6z2" onclick="addSubject('Tue2')"></td>
                        <td id="Wed2" class="tg-s6z2" onclick="addSubject('Wed2')"></td>
                        <td id="Thu2" class="tg-s6z2" onclick="addSubject('Thu2')"></td>
                        <td id="Fri2" class="tg-s6z2" onclick="addSubject('Fri2')"></td>
                      </tr>
                      <tr>
                        <td class="tg-szxb">3.</td>
                        <td id="Mon3" class="tg-s6z2" onclick="addSubject('Mon3')"></td>
                        <td id="Tue3" class="tg-s6z2" onclick="addSubject('Tue3')"></td>
                        <td id="Wed3" class="tg-s6z2" onclick="addSubject('Wed3')"></td>
                        <td id="Thu3" class="tg-s6z2" onclick="addSubject('Thu3')"></td>
                        <td id="Fri3" class="tg-s6z2" onclick="addSubject('Fri3')"></td>
                      </tr>
                      <tr>
                        <td class="tg-szxb">4.</td>
                        <td id="Mon4" class="tg-s6z2" onclick="addSubject('Mon4')"></td>
                        <td id="Tue4" class="tg-s6z2" onclick="addSubject('Tue4')"></td>
                        <td id="Wed4" class="tg-s6z2" onclick="addSubject('Wed4')"></td>
                        <td id="Thu4" class="tg-s6z2" onclick="addSubject('Thu4')"></td>
                        <td id="Fri4" class="tg-s6z2" onclick="addSubject('Fri4')"></td>
                      </tr>
                      <tr>
                        <td class="tg-szxb">5.</td>
                        <td id="Mon5" class="tg-s6z2" onclick="addSubject('Mon5')"></td>
                        <td id="Tue5" class="tg-s6z2" onclick="addSubject('Tue5')"></td>
                        <td id="Wed5" class="tg-s6z2" onclick="addSubject('Wed5')"></td>
                        <td id="Thu5" class="tg-s6z2" onclick="addSubject('Thu5')"></td>
                        <td id="Fri5" class="tg-s6z2" onclick="addSubject('Fri5')"></td>
                      </tr>
                      <tr>
                        <td class="tg-szxb">6.</td>
                        <td id="Mon6" class="tg-s6z2" onclick="addSubject('Mon6')"></td>
                        <td id="Tue6" class="tg-s6z2" onclick="addSubject('Tue6')"></td>
                        <td id="Wed6" class="tg-s6z2" onclick="addSubject('Wed6')"></td>
                        <td id="Thu6" class="tg-s6z2" onclick="addSubject('Thu6')"></td>
                        <td id="Fri6" class="tg-s6z2" onclick="addSubject('Fri6')"></td>
                      </tr>
                      <tr>
                        <td class="tg-szxb">7</td>
                        <td id="Mon7" class="tg-s6z2" onclick="addSubject('Mon7')"></td>
                        <td id="Tue7" class="tg-s6z2" onclick="addSubject('Tue7')"></td>
                        <td id="Wed7" class="tg-s6z2" onclick="addSubject('Wed7')"></td>
                        <td id="Thu7" class="tg-s6z2" onclick="addSubject('Thu7')"></td>
                        <td id="Fri7" class="tg-s6z2" onclick="addSubject('Fri7')"></td>
                      </tr>
                    </table>
        </div>



        <div id="subjectSelector" class="selectSubject">
                <h2>Fach auswählen</h2>
                <p>wähle das Fach aus</p>
                <select id="subjectSelectorField">
                        <option></option>
                        <option>Mathe</option>
                        <option>Deutsch</option>
                        <option>Englisch</option>
                        <option>Spanisch</option>
                        <option>Sport</option>
                        <option>Französisch</option>
                        <option>Latein</option>
                        <option>Biologie</option>
                        <option>Religion</option>
                        <option>Musik</option>
                        <option>Kunst</option>
                        <option>Erdkunde</option>
                        <option>Informatik</option>
                        <option>Physik</option>
                        <option>Chemie</option>
                        <option>Wirtschaft</option>
                        <option>Politik</option>
                        <option>Frei</option>
                        
                </select>

                <br><br>
                <button onclick="add()">Hinzufügen</button>

        </div>
<br>
<br><br>
        <button onclick="further()">Weiter</button>
        <div class="pageControll">
                <img  src="circle.png" width="20px">
                <img src="circle-filled.png" width="20px">
                <img src="circle.png" width="20px">
          </div>
        <br>
</div>



<div id="configuration3" class="configuration1">
        <br><br><br><br><br><br><br>
        <h1>Alles Bereit</h1>
        <br><br><br><br><br>
       
        <button onclick="finishConfig()">Fertig</button>

  <div class="pageControll">
        <img  src="circle.png" width="20px">
        <img src="circle.png" width="20px">
        <img src="circle-filled.png" width="20px">
  </div>


        <br>
</div>

<!---------------------------------------------------------Softwareupdate--------------------------------------------------------->

<div id="updater" class="softwareupdate">
        <br><br>
<h1>Softwareupdate</h1>

<br><br><br>
<div class="elements">
<h3>Aktuelle Version</h3>
<p>Version 0.0.1</p>
<br>
<h3>Neuste Version</h3>
<iframe class="newestVersion" src="https://nbs-planer-update.netlify.app"></iframe>
<br><br><br>
</div>
<button onclick="sw()">neuste Version laden</button>
<br><br><br><br><br><br>
<button onclick="leaveUpdateMode()">Verlassen</button>
</div>


<div id="splash" class="splashscreen">
        <br><br><br><br><br><br>
        <br><br><br><br><br><br>
        <img src="icon.png" height="30%">
        <br>
        <h1>Schulplaner</h1>
        
</div>

<script>
     /*   if(sessionStorage.hasOwnProperty("splash")){
                document.getElementById("splash").style.display = "none";
        }else{
                document.getElementById("splash").style.display = "block"
                setTimeout(function(){
                document.getElementById("splash").style.display = "none";
                sessionStorage.setItem("splash", true);
                
        },1500)
        }
      */
</script>

<!----------------------------------------------------implemented scripts-------------------------------------------------------->
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-database.js"></script>
<script src="database.js"></script>
<script src="openpages.js"></script>
<script src="loadResources.js"></script>



 </body>
</html>





<script>
/*
firebase.database().ref("0001").push().set({
        "key" : "0001"
        
        });

*/
  
navigator.serviceWorker.register('sw.js')
            .then(subscription => console.log(subscription))
            .catch(err => console.error('Fehler', err));
       
    </script>
    

    <script>

onLoad()
function onLoad(){
if(localStorage.hasOwnProperty("key") && localStorage.getItem("setUp") ==  "established"){
        start();
}else{
        setUp();
}

}
function start(){
//create UI






}

function setUp(){
        if(localStorage.hasOwnProperty("setUp")){

        }else{
        localStorage.setItem("setUp", 0);
        }
        let setUp = parseInt(localStorage.getItem("setUp"));


switch(setUp){
        case 0: document.getElementById("configuration1").style.display = "block";
                break;

        case 1: document.getElementById("configuration2").style.display = "block";
                document.getElementById("configuration1").style.display = "none";
                break;

        case 2: document.getElementById("configuration3").style.display = "block";
                document.getElementById("configuration2").style.display = "none";
                break;

       

        }      
}


function login(){
let key = document.getElementById("key").value;
if(key == ""){         
document.getElementById("fail").innerHTML = "Die Felder dürfen nicht leer sein";
}


firebase.database().ref(key).on("child_added", function (snapshot) {
let saved =  snapshot.val().key;
console.log(saved);
localStorage.setItem("loggedIn", true);
localStorage.setItem("key", saved);
sessionStorage.setItem("check", true);
localStorage.setItem("setUp", "1");
location.reload();

});

if(sessionStorage.hasOwnProperty("check")){

}else{
document.getElementById("fail").innerHTML = "Dieses Konto existiert möglicherweise nicht oder das Passwort ist falsch";
}
}
function buyAccess(){
window.open("nbs-web.netlify.app/planer.html");
}



function addSubject(lesson){
        document.getElementById("subjectSelector").style.display = "block";
        sessionStorage.setItem("lesson", lesson);

}

function add(){
        let lesson = sessionStorage.getItem("lesson");
        let subject = document.getElementById("subjectSelectorField").value;
        localStorage.setItem(lesson, subject);
        document.getElementById("subjectSelector").style.display = "none";
        document.getElementById(lesson).innerHTML = subject
}


function further(){
        localStorage.setItem("setUp", "2")
        document.getElementById("configuration3").style.display = "block";
        document.getElementById("configuration2").style.display = "none";
        let count = 1;
setTimeout(function(){
        checkHWExisting();
function checkHWExisting(){
if(localStorage.hasOwnProperty("hw" + count)){
        count ++;
        checkHWExisting();
}else{
if(count <= 20){
localStorage.setItem("hw" + count, " ");
count++
checkHWExisting();
}
}
}
},1000);
}

function finishConfig(){
        localStorage.setItem("setUp", "established");
        document.getElementById("configuration3").style.display = "none";
        location.reload();
          
        
}


function saveHomework(){
        let homework = document.getElementById("homework").value;
        localStorage.setItem("homework", homework);
        }
       





    </script>

    <script src="softwareupdate.js"></script>